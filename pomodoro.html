<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Pomodoro Timer</title>
    <!-- Google Font for Poppins -->
    <link
      href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;600&display=swap"
      rel="stylesheet"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: "Poppins", sans-serif;
      }
      body,
      html {
        transition: background-color 0.5s ease;
        height: 100%;
        width: 100%;
        display: flex;
        justify-content: center;
        align-items: center;
        background-color: #690b22;
      }
      /* Timer Card */
      .timer-card {
        background: rgba(255, 255, 255, 0.1);
        border: 1px solid rgba(255, 255, 255, 0.2);
        backdrop-filter: blur(20px);
        padding: 30px;
        border-radius: 20px;
        width: 450px;
        display: flex;
        flex-direction: column;
        gap: 20px;
        color: #dfdfdf;
        position: relative;
      }
      /* User Display */
      .user {
        text-align: center;
        font-size: 1.5rem;
        margin-bottom: 10px;
      }
      /* Tabs */
      .tabs {
        display: flex;
        justify-content: space-between;
        gap: 10px;
      }
      .tab {
        padding: 12px 15px;
        background-color: transparent;
        border: none;
        color: #fff;
        font-size: 1.2rem;
        border-radius: 8px;
        transition: background-color 0.3s ease;
        cursor: pointer;
      }
      .tab.active {
        background-color: #ffd52b;
        color: #171717;
      }
      /* Time Display */
      .time-display {
        text-align: center;
        font-size: 4rem;
        letter-spacing: 2px;
      }
      /* Progress Bar */
      .progress-container {
        width: 100%;
        height: 8px;
        background: rgba(255, 255, 255, 0.2);
        border-radius: 5px;
        overflow: hidden;
      }
      .progress-bar {
        height: 100%;
        width: 0%;
        background: #ffd52b;
        transition: width 0.5s ease;
      }
      /* Cycle Counter */
      .cycle-counter {
        text-align: center;
        font-size: 1rem;
      }
      /* Controls */
      .controls {
        display: flex;
        justify-content: space-between;
        gap: 10px;
      }
      .controls button {
        padding: 10px;
        font-size: 1.2rem;
        background-color: #535353;
        color: #fff;
        border: none;
        border-radius: 10px;
        flex: 1;
        transition: transform 0.3s ease, background-color 0.3s ease;
        height: 50px;
        cursor: pointer;
      }
      .controls button:hover {
        transform: scale(1.05);
        background-color: #6b6b6b;
      }
      /* Help and Settings Buttons */
      .help-btn,
      .settings-btn {
        position: fixed;
        bottom: 20px;
        background-color: #fff;
        color: #171717;
        border: none;
        padding: 5px 15px;
        border-radius: 50%;
        font-size: 1.5rem;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        transition: transform 0.3s ease;
        cursor: pointer;
      }
      .help-btn {
        right: 20px;
      }
      .settings-btn {
        right: 80px;
      }
      .help-btn:hover,
      .settings-btn:hover {
        transform: scale(1.1);
      }
      /* Modal Styling (common for both modals) */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
        justify-content: center;
        align-items: center;
        color: #dfdfdf;
      }
      .modal-content {
        background-color: #1e1e1e;
        padding: 30px;
        border-radius: 10px;
        width: 300px;
        text-align: left;
      }
      .modal-content h2 {
        margin-bottom: 15px;
        color: #fff;
      }
      .modal-content label {
        display: block;
        margin: 10px 0 5px;
      }
      .modal-content input {
        width: 100%;
        padding: 8px;
        border-radius: 5px;
        border: 1px solid #ccc;
      }
      .modal-content .btn-group {
        margin-top: 15px;
        display: flex;
        justify-content: space-between;
      }
      .modal-content button {
        padding: 10px;
        font-size: 1rem;
        border: none;
        border-radius: 5px;
        cursor: pointer;
        flex: 1;
        margin: 0 5px;
      }
      .close-btn {
        background-color: #535353;
        color: #fff;
      }
      .save-btn {
        background-color: #ffd52b;
        color: #171717;
      }
      /* Footer */
      .footer {
        position: absolute;
        bottom: 10px;
        width: 100%;
        text-align: center;
        font-size: 0.9rem;
        color: #fff;
        opacity: 0.8;
      }
    </style>
  </head>
  <body>
    <div class="timer-card" id="timer-card">
      <!-- User Display -->
      <div class="user" id="user-display"></div>
      <!-- Tabs -->
      <div class="tabs">
        <button
          class="tab active"
          id="pomodoro-tab"
          onclick="switchTab('pomodoro')"
        >
          Pomodoro
        </button>
        <button
          class="tab"
          id="short-break-tab"
          onclick="switchTab('short-break')"
        >
          Short Break
        </button>
        <button
          class="tab"
          id="long-break-tab"
          onclick="switchTab('long-break')"
        >
          Long Break
        </button>
      </div>
      <!-- Time Display -->
      <div class="time-display" id="display">25:00</div>
      <!-- Progress Bar -->
      <div class="progress-container">
        <div class="progress-bar" id="progress-bar"></div>
      </div>
      <!-- Cycle Counter (for Pomodoro sessions) -->
      <div class="cycle-counter" id="cycle-counter">Pomodoros Completed: 0</div>
      <!-- Controls -->
      <div class="controls">
        <button id="start-pause-btn" onclick="toggleStartPause()">Start</button>
        <button onclick="skipSession()">Skip</button>
        <button onclick="resetTimer()">Reset</button>
      </div>
    </div>

    <!-- Settings Button -->
    <button class="settings-btn" onclick="showSettingsModal()">⚙</button>
    <!-- Help Button -->
    <button class="help-btn" onclick="showHelpModal()">?</button>

    <!-- Help Modal -->
    <div class="modal" id="help-modal">
      <div class="modal-content">
        <h2>How Pomodoro Works</h2>
        <p>
          Work for 25 minutes, followed by a 5-minute break. After 4 cycles,
          take a 15-minute break.
        </p>
        <button class="close-btn" onclick="closeHelpModal()">Close</button>
      </div>
    </div>

    <!-- Settings Modal -->
    <div class="modal" id="settings-modal">
      <div class="modal-content">
        <h2>Timer Settings</h2>
        <label for="pomodoro-input">Pomodoro (minutes):</label>
        <input type="number" id="pomodoro-input" value="25" min="1" />
        <label for="short-break-input">Short Break (minutes):</label>
        <input type="number" id="short-break-input" value="5" min="1" />
        <label for="long-break-input">Long Break (minutes):</label>
        <input type="number" id="long-break-input" value="15" min="1" />
        <div class="btn-group">
          <button class="save-btn" onclick="saveSettings()">Save</button>
          <button class="close-btn" onclick="closeSettingsModal()">
            Cancel
          </button>
        </div>
      </div>
    </div>

    <div class="footer">
      <p>made with ♥ by OPS</p>
    </div>

    <!-- Audio for Beep -->
    <audio id="beep-sound">
      <source
        src="https://actions.google.com/sounds/v1/alarms/bugle_tune.ogg"
        type="audio/ogg"
      />
      Your browser does not support the audio element.
    </audio>

    <script>
      /********************
       * Username Handling
       ********************/
      // List of prohibited names or words
      var prohibitedNames = [
        "papa",
        "baap",
        "maa",
        "madarchod",
        "bahenchod",
        "gandu",
        "chutiya",
        "bhosdike",
        "laude",
        "loda",
        "lodu",
        "chut",
        "lund",
        "haraami",
        "kutta",
        "kamina",
        "saala",
        "chakka",
        "hijra",
        "randi",
        "randwa",
        "kutti",
        "suar",
        "gaand",
        "bitch",
        "fuck",
        "motherfucker",
        "asshole",
        "bastard",
        "slut",
        "dick",
        "pussy",
        "cunt",
        "whore",
        "nigger",
        "shit",
        "dumbass",
        "retard",
        "twat",
        "prick",
        "wanker",
        "piss",
        "jerk",
        "cock",
        "fucker",
        "ass",
        "arse",
        "shag",
        "dildo",
        "bollocks",
        "fag",
        "scum",
        "tosser",
        "bollocks",
        "bhen",
        "mc",
        "bc",
        "chod",
        "chutiya",
        "pataka",
        "jhant",
        "rakhail",
        "kameena",
        "tatti",
        "sala",
        "chuti",
        "kutti",
        "haraamzada",
        "bancho",
        "haramkhor",
        "ullu",
        "bevda",
        "nashedi",
        "chhakka",
        "faadu",
        "bakchod",
        "jhaant",
        "chutya",
        "loda",
        "raand",
        "gand",
        "bhenchod",
        "madar",
        "gaand",
        "suar",
        "kalank",
        "maa ki",
        "bhen ki",
        "gaandu",
        "kamina",
        "ullu ke pathe",
        "saale",
        "kutiya",
        "choot",
        "kutta",
      ];

      // Check for stored username in localStorage
      var storedUser = localStorage.getItem("username");
      if (storedUser) {
        setUser(storedUser);
      } else {
        askForName();
      }

      function askForName() {
        var user = prompt("Quick Question! What is Your Name?");
        if (!user) {
          askForName();
          return;
        }
        if (containsProhibitedWord(user.toLowerCase())) {
          alert(
            "The name you entered contains prohibited words. Please enter a different name."
          );
          askForName();
        } else {
          localStorage.setItem("username", user);
          setUser(user);
        }
      }

      function containsProhibitedWord(name) {
        return prohibitedNames.some(function (prohibitedWord) {
          return name.includes(prohibitedWord);
        });
      }

      function setUser(user) {
        document.getElementById("user-display").innerHTML =
          "Radhey Radhey, " + user + "👋";
      }

      /***********************
       * Pomodoro Timer Code
       ***********************/
      // Retrieve timer settings from localStorage or use defaults
      let pomodoroTime = localStorage.getItem("pomodoroTime")
        ? parseInt(localStorage.getItem("pomodoroTime"), 10)
        : 25;
      let shortBreakTime = localStorage.getItem("shortBreakTime")
        ? parseInt(localStorage.getItem("shortBreakTime"), 10)
        : 5;
      let longBreakTime = localStorage.getItem("longBreakTime")
        ? parseInt(localStorage.getItem("longBreakTime"), 10)
        : 15;

      let timerId;
      let timeLeft = pomodoroTime * 60;
      let sessionDuration = timeLeft;
      let isRunning = false;
      let isPaused = false;
      let currentSession = "pomodoro";
      let pomodoroCount = 0;

      function updateDisplay() {
        const minutes = Math.floor(timeLeft / 60);
        const seconds = timeLeft % 60;
        document.getElementById("display").textContent =
          String(minutes).padStart(2, "0") +
          ":" +
          String(seconds).padStart(2, "0");
        const progressPercent =
          ((sessionDuration - timeLeft) / sessionDuration) * 100;
        document.getElementById("progress-bar").style.width =
          progressPercent + "%";
      }

      function switchTab(session) {
        currentSession = session;
        resetTimer();
        document
          .querySelectorAll(".tab")
          .forEach((tab) => tab.classList.remove("active"));
        document.getElementById(`${session}-tab`).classList.add("active");

        const body = document.body;
        if (session === "pomodoro") {
          timeLeft = pomodoroTime * 60;
          sessionDuration = timeLeft;
          body.style.backgroundColor = "#690B22";
        } else if (session === "short-break") {
          timeLeft = shortBreakTime * 60;
          sessionDuration = timeLeft;
          body.style.backgroundColor = "#1B4D3E";
        } else if (session === "long-break") {
          timeLeft = longBreakTime * 60;
          sessionDuration = timeLeft;
          body.style.backgroundColor = "#9b8238";
        }
        updateDisplay();
      }

      function toggleStartPause() {
        const startPauseBtn = document.getElementById("start-pause-btn");
        if (isRunning) {
          if (!isPaused) {
            clearInterval(timerId);
            isPaused = true;
            startPauseBtn.textContent = "Resume";
          } else {
            startTimer();
            isPaused = false;
            startPauseBtn.textContent = "Pause";
          }
        } else {
          startTimer();
          isRunning = true;
          startPauseBtn.textContent = "Pause";
        }
      }

      function startTimer() {
        timerId = setInterval(() => {
          if (timeLeft > 0) {
            timeLeft--;
            updateDisplay();
          } else {
            clearInterval(timerId);
            isRunning = false;
            document.getElementById("start-pause-btn").textContent = "Start";
            playBeep();
            if (currentSession === "pomodoro") {
              pomodoroCount++;
              document.getElementById("cycle-counter").textContent =
                "Pomodoros Completed: " + pomodoroCount;
            }
            alert(`${capitalize(currentSession)} finished!`);
          }
        }, 1000);
      }

      function skipSession() {
        clearInterval(timerId);
        resetTimer();
      }

      function resetTimer() {
        clearInterval(timerId);
        isRunning = false;
        isPaused = false;
        document.getElementById("start-pause-btn").textContent = "Start";
        if (currentSession === "pomodoro") {
          timeLeft = pomodoroTime * 60;
        } else if (currentSession === "short-break") {
          timeLeft = shortBreakTime * 60;
        } else if (currentSession === "long-break") {
          timeLeft = longBreakTime * 60;
        }
        sessionDuration = timeLeft;
        updateDisplay();
      }

      function playBeep() {
        document.getElementById("beep-sound").play();
      }

      function capitalize(word) {
        return word.charAt(0).toUpperCase() + word.slice(1);
      }

      // Help Modal Functions
      function showHelpModal() {
        document.getElementById("help-modal").style.display = "flex";
      }
      function closeHelpModal() {
        document.getElementById("help-modal").style.display = "none";
      }

      // Settings Modal Functions
      function showSettingsModal() {
        document.getElementById("settings-modal").style.display = "flex";
        document.getElementById("pomodoro-input").value = pomodoroTime;
        document.getElementById("short-break-input").value = shortBreakTime;
        document.getElementById("long-break-input").value = longBreakTime;
      }
      function closeSettingsModal() {
        document.getElementById("settings-modal").style.display = "none";
      }
      function saveSettings() {
        const pTime = parseInt(
          document.getElementById("pomodoro-input").value,
          10
        );
        const sTime = parseInt(
          document.getElementById("short-break-input").value,
          10
        );
        const lTime = parseInt(
          document.getElementById("long-break-input").value,
          10
        );
        if (pTime > 0 && sTime > 0 && lTime > 0) {
          pomodoroTime = pTime;
          shortBreakTime = sTime;
          longBreakTime = lTime;
          // Save to localStorage so settings persist
          localStorage.setItem("pomodoroTime", pomodoroTime);
          localStorage.setItem("shortBreakTime", shortBreakTime);
          localStorage.setItem("longBreakTime", longBreakTime);
          resetTimer();
          closeSettingsModal();
        } else {
          alert("Please enter valid numbers greater than 0.");
        }
      }

      // Initialize display on load
      updateDisplay();
    </script>
  </body>
</html>
